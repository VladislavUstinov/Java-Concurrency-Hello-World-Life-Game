<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="ru">
<head>
<!-- Generated by javadoc (1.8.0_131) on Tue Feb 16 21:04:41 MSK 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Game</title>
<meta name="date" content="2021-02-16">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Game";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../testfieldgame/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Game.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../testfieldgame/FieldQuadrant.html" title="class in testfieldgame"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../testfieldgame/TestFieldGame.html" title="class in testfieldgame"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?testfieldgame/Game.html" target="_top">Frames</a></li>
<li><a href="Game.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">testfieldgame</div>
<h2 title="Class Game" class="title">Class Game</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>testfieldgame.Game</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">Game</span>
extends java.lang.Object</pre>
<div class="block">The project is dedicated only to training in Java Concurrency. 
 The goal was to make several threads having personal pieces of data and sending/receiving 
 messages via BlockingQueue. Not to be bored, I emagined a game similar to famous game Life, but much simpler.
 <p>
 <a href="../testfieldgame/Game.html" title="class in testfieldgame"><code>Game</code></a> is main class in the project. 
 Its main goal is to perform a game loop with digits moving across the game field (2d array) according to some rules.
 The rules are set in <a href="../testfieldgame/FieldQuadrant.html#applyRule-int-int-"><code>FieldQuadrant.applyRule(int, int)</code></a> function. 
 For now, the general rule is just to move each nonzero digit to the left in the game field.
 <p>
 About the game and the threads. Suppose, we have a 2d array, most of which values are zeros, 
 except for a few values equal to one (call them "ones"). 
 Lets divide the field into smaller 2d square arrays (quadrants), on which some threads will act.
 The threads should move "ones" to the left each turn of the game. 
 When any "one" reaches left boundary of its threads' field part, 
 it should jump to the next threads' field part. 
 If it was boundary of the most left quadrant, the "one" should jump to the most right quadrant.
 So we have global periodic boundary condition in our field.
 <p>
 The threads are <a href="../testfieldgame/FieldQuadrant.html" title="class in testfieldgame"><code>FieldQuadrant</code></a> objects. 
 Threads' pool is formed simply via storing them in array <a href="../testfieldgame/Game.html#fieldQuadrantAr"><code>fieldQuadrantAr</code></a>.
 Each turn of the game is performed inside of loop in <a href="../testfieldgame/Game.html#start--"><code>start()</code></a> function 
 with fixed number of iterations equal to <a href="../testfieldgame/Game.html#NUM_ITERATIONS"><code>NUM_ITERATIONS</code></a>.
 <p>
 Each turn we first set up integer inside of jobsCount equal to NUM_THREADS. 
 This means that threads have to perform at least NUM_THREADS jobs. 
 Indeed, each thread should at least move its "ones" inside of its part of the global field (<code>FieldQuadrants#fieldQuad</code>).
 Then, if some of the "ones" got to the left boundary, the threads put corresponding messages into 
 the message queues of other threads ("ones" jump to other field parts). 
 Before putting new message about new job, the thread increases jobsCount.
 Then, the thread checks up its own message queue, 
 takes messages and places new "ones" in its part of the field, if any. 
 After doing another job, the thread decreases jobsCount.
 The thread will wait in msgQueue.take() eternally until the main thread will interrupt it.
 <p>
 The main thread in <a href="../testfieldgame/Game.html#start--"><code>start()</code></a> function waits until other threads from the pool notify 
 that jobsCount has been changed. When jobsCount is zero, 
 the main thread understands that there are no more jobs to be done and
 interrupts all the other threads in the pool. Then we're done and next turn comes.
 <p>
 See <code>GameTest</code> class for launching the productivity test of <a href="../testfieldgame/Game.html" title="class in testfieldgame"><code>Game</code></a> class. 
 After fixed amount of iterations the game field should become the same as it was in the beginning.
 This follows from our periodic boundary condition, and this is used to check up for games expected vs actual state in the test.
 <p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../testfieldgame/Game.html#Game-int-int-int-">Game</a></span>(int&nbsp;INITIAL_NUM_POINTS,
    int&nbsp;FIELD_LENGTH,
    int&nbsp;NUM_THREADS)</code>
<div class="block">Constructor sets up data via using new operator to all final fields, which will be not renewed
 until the very end of the game.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.util.ArrayList&lt;int[][]&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../testfieldgame/Game.html#getDeepCopyAllFields--">getDeepCopyAllFields</a></span>()</code>
<div class="block">getDeepCopyAllFields is used in test to fix initial global field 
 and then compare it with the state after all loops.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../testfieldgame/Game.html#printQuadrants--">printQuadrants</a></span>()</code>
<div class="block">Just prints global field in standard output stream.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../testfieldgame/Game.html#safePrintln-java.lang.String-">safePrintln</a></span>(java.lang.String&nbsp;s)</code>
<div class="block">Prints String s in System.out in a synchronized way.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../testfieldgame/Game.html#start--">start</a></span>()</code>
<div class="block">Launches main game loop.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Game-int-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Game</h4>
<pre>public&nbsp;Game(int&nbsp;INITIAL_NUM_POINTS,
            int&nbsp;FIELD_LENGTH,
            int&nbsp;NUM_THREADS)</pre>
<div class="block">Constructor sets up data via using new operator to all final fields, which will be not renewed
 until the very end of the game.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>INITIAL_NUM_POINTS</code> - is amount of "ones" in the field.</dd>
<dd><code>FIELD_LENGTH</code> - is length of each quadrant, which is smaller piece of global 2d array field.</dd>
<dd><code>NUM_THREADS</code> - is amount of threads in the pool.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDeepCopyAllFields--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDeepCopyAllFields</h4>
<pre>public&nbsp;java.util.ArrayList&lt;int[][]&gt;&nbsp;getDeepCopyAllFields()</pre>
<div class="block">getDeepCopyAllFields is used in test to fix initial global field 
 and then compare it with the state after all loops. They should equal each other.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ArrayList of quadrants, which all together make up the global game field.</dd>
</dl>
</li>
</ul>
<a name="printQuadrants--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printQuadrants</h4>
<pre>public&nbsp;void&nbsp;printQuadrants()</pre>
<div class="block">Just prints global field in standard output stream.</div>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">Launches main game loop. 
 
 Printing is commented - you may uncomment it and see what happens at each loop iteration.
 You may also uncomment scan.next () section and each turn wait for keyboard input to proceed.
 If you do so, the typing "q" should quit the loop.</div>
</li>
</ul>
<a name="safePrintln-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>safePrintln</h4>
<pre>public static&nbsp;void&nbsp;safePrintln(java.lang.String&nbsp;s)</pre>
<div class="block">Prints String s in System.out in a synchronized way. 
 Nobody is going to manipulate System.out meantime, so this is considered to be thread safe.
 
 However for now, the printing is commented. 
 The function is used inside of FieldQuadrants for debug prints.
 So if you uncomment the code inside, the debug information will print.
 
 Hm, probably I'd better print to Logger.getLogger (). Forget about it :)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - is a string to be printed.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../testfieldgame/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Game.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../testfieldgame/FieldQuadrant.html" title="class in testfieldgame"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../testfieldgame/TestFieldGame.html" title="class in testfieldgame"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?testfieldgame/Game.html" target="_top">Frames</a></li>
<li><a href="Game.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
